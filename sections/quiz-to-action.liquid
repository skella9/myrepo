{% comment %}
  Warning, do not edit this file.  This is a generated file and your changes may be overwritten
  automatically.
{% endcomment %}

{% assign publishSpotId = "home" %}

{{ 'quiz.css' | asset_url | stylesheet_tag }}
<div class="quiz-to-action-container quiz-to-action-container-{{publishSpotId}}">
  {% if request.design_mode %}
    <div class='delayed-show'>
      <h2>QuizToAction</h2>
      <div class='quiz-to-action-question-container'>
        <p>This is an editor preview.</p>
        <p>You can control which quiz is publish here from the QuizToAction admin panel.</p>
        <p>This will show the published quiz after you save your changes.</p>
      </div>
    </div>
  {% endif %}
</div>


<script src="https://app.quiztoaction.com/ext/section-Ohw3haht.js"></script>
<script>
  function loadQuizToAction() {
    const quizToActionUrl = "https://app.quiztoaction.com";
    const shopApiKey = "{{shop.metafields.quiztoaction.public_api_shop_id}}";
    const sectionId = "{{publishSpotId}}";
    const publishSpotName = "{{section.settings.publishSpotName}}";
    const designMode = "{{section.design_mode}}";
    quizToActionRender(quizToActionUrl, shopApiKey, sectionId, publishSpotName, designMode);
  }

  document.addEventListener('DOMContentLoaded', loadQuizToAction);

  document.addEventListener("shopify:section:load", function(event) {
    if(event.detail.sectionId === '{{section.id}}') {
      loadQuizToAction();
    }
  });
</script>

{% schema %}
{
  "name": "QuizToAction",
  "settings": [
    {
      "type": "text",
      "id": "publishSpotName",
      "label": "Publish Spot Name",
      "info": "This name shows in the admin panel so you know where your quizzes are published.\n\nIt is just for you.  Your customers don't see this name."
    }
  ],
  "presets": [
    {
      "name": "Quiz To Action",
      "category": "Apps",
      "settings": {
        "publishSpotName": "Home"
      }
    }
  ]
}
{% endschema %}
